# Vue

### 环境

NodeJs是一个JavaScript运行环境，是一个平台，类比于JVM

Npm是依赖包管理工具，Webpack是一个前端资源加载/打包工具，Npm和WebPack类比于maven

cnpm淘宝镜像

Vue-cli是Vue命令行工具，可以快速创建集成Vue前端项目，内置webpack

### 概念

- 提供**MVVM**双向数据绑定，依赖**模板表达式和计算属性**
- 通过**指令**将数据和页面进行交互
- 对页面的各个模块进行拆分，变成单独的**组件**，然后通过**数据绑定**，调用对应的模板组件，同时传入参数
- 通过**客户端路由**实现页面的平滑切换

**MVVM**

view -- ViewModel -- Model

DOM--         Vue      -- javaScript对象数据

**数据驱动**

传统使用js操作dom改变视图，vue改变数据自动更新视图变化。

**组件化**

把整一个网页拆分成一个个组件（区块），每个区块作成一个组件，网页由多个组件(如菜单，主体内容...)拼接或嵌套而成，组件可以复用。通过路由的不同加载不同的组件(不同的主体内容...)到主页面中，如：`https://ip:port/console/index.html#/knowledgeCenter`或`https://ip:port/console/index.html#/CampaignPage`。

**SPA (Single-page application) 单页面应用**：只有一张Web页面应用，是加载单个HTML页面并在用户与应用程序交互时动态更新该页面的web应用程序。在URL中采用#号来作为当前视图的地址，改变#号后的参数来载入不同的页面片段。



app.js是程序的入口模块，所有请求进入这里进行处理，在通过router.js进行路由分发







### 项目目录

- **node_modules**：项目依赖
- **public**：Vue3.x的静态资源目录，相当于vue2.x的static，目录下的文件会不做处理直接被复制到最终打包目录，必须使用绝对路径引用。
- **src**：源码目录
  - **assets**：静态资源目录，会被webpack处理为模块依赖，只能用相对路径
  - **components**：vue组件
  - **App.vue**：默认入口组件，它的vm实例控制的是index.html中的div区域
  - **main.js**：项目入口文件，webpack编译打包从此文件开始，所有用到的资源应该从此import引入，最终打包的js文件会自动插入到index.html页面中
  - **babel.config.js**：Babel配置文件，Babel是处理es6高级语法转换库，会将es6的高级语法转换为低级浏览器可以识别的js代码。
  - **package-lock.json**：记录当前项目依赖的所有库的具体来源和版本号
  - **package.json**：项目说明文件以及依赖包列表
    - **script**：项目运行脚本
      - **serve**：输入`npm run serve`会执行当前serve配置值
      - **build**：输入`npm run build`会执行当前build配置值
    - **dependencies和devDependencies**：项目依赖列表，其中dependencies是开发生产环境都需要的依赖，devDependencies是开发依赖，webpack打包不会打包进去
    - **eslintConfig**：js代码检测工具

### 启动流程

1. 输入`npm run serve`，到package.json查找script中serve配置运行命令
2. 加载依赖node_modules
3. 把其他组件导入到App.vue中，调用render()方法渲染组件；解析main.js之后生成打包之后的文件app.js，植入到index.html中；构建页面成功





































### 样例代码

```vue
App.vue
// 组件模板，对应要展示的界面
<template>
    <div id="app">
        <router-view></router-view>
        {{msg}}
    </div>
</template>

<script>
    // vm实例
    export default {
        name: "app",
        data () {
            return {
                msg:"这是一个vue"
            }
        }
    };
</script>
<style>
...样式
</style>
```

```javascript
main.js
import Vue from "vue";
import App from "./App";
import router from "./router";
import ElementUI from "element-ui";
import "element-ui/lib/theme-chalk/index.css";
import Print from "@/vendor/print";
import $ from "jquery";
import "babel-polyfill";
import "@/api/js/self_adaption.js";
import axios from "@/utils/axios.js";
import Echarts from "echarts";
import tools from "@/utils/tools.js";
import apis from "@/utils/apis.js";
import validation from "@/utils/validation.js";
import "./assets/css/index.css";

Vue.use(ElementUI);
Vue.use(Print);
Vue.use(tools);
Vue.use(axios);
Vue.use(apis);
Vue.use(validation);
Vue.config.productionTip = false;
Vue.prototype.$echart = Echarts;

// var vm = 可以去掉
var vm = new Vue({
    // el 指定当前vue实例要控制页面上的哪个区域
    el:"#app",
    router,
    template: "<App/>",
    components: {
        App
    },
    // data 用于页面绑定数据的对象
    data:{
        msg:"hello vue"
    }
});
```



```html
index.html
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>vue</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                background: #fff;
                font-size: 14px;
            }

            [v-cloak] {
                display: none;
            }
        </style>
    </head>

    <body>
        <div id="app" v-clock>
            {{msg}} --模板表达式
        </div>
    </body>
</html>
```

### 插值表达式

### 指令

#### v-clock

解决闪烁问题

```html
<style>
    [v-clock]{
        display:none;
    }
</style>

<body>
    <div id="app">
        <p v-clock>{{msg}}</p>
    </div>
</body>
```



#### v-text和v-html

设置标签的文本内容，text纯文本设置，html设置html文本

```html
index.html
<html>
    <body>
        <div id="app">
            <p v-text="msg2"></p>
            <p v-html="msg2"></p>
        </div>
    </body>
</html>
```

```javascript
main.js
var vm = new Vue({
    el:"#app",
    data:{
        msg2:"<h1>我是一个H1标题，让我变大</h1>"
    }
});
```

#### v-bind

v-bind属性绑定，绑定的数据在vm实例的data属性中声明

```html
<input type="button" value="按钮" v-bind:title="mytitle"/>
<input type="button" value="按钮" :title="mytitle+'qwe123'"/>

<input type="button" value="按钮" v-on:click="show1('xx')"/>
<input type="button" value="按钮" @click="show"/>
```





























