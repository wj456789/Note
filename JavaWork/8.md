# Note

```java
import org.apache.commons.collections4.CollectionUtils;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public class LogWebservice extends BaseDAO {
    private static final int MAX_QUEUE_SIZE = 200000;

    private static final BlockingQueue<InterfaceLogBO> interfaceLogQueue = new ArrayBlockingQueue<>(MAX_QUEUE_SIZE);

    private static final ExecutorService SCH_THREAD_POOL_EXECUTOR_NEW =
        new ThreadPoolExecutor(
        5,
        10,
        60,
        TimeUnit.SECONDS,
        new ArrayBlockingQueue<>(MAX_QUEUE_SIZE),
        new UserThreadFactory("CbInterfaceLog"));

    static {
        LOGGER.info("Start the execution of the log obtaining queue....");
        RunLogWebserviceThread runLogWebserviceThread = new RunLogWebserviceThread();
        SCH_THREAD_POOL_EXECUTOR_NEW.execute(runLogWebserviceThread);
    }

    public boolean interfaceLogWrite(InterfaceLogBO interfaceLogBO) {
        return interfaceLogBO != null && interfaceLogQueue.offer(interfaceLogBO);
    }

    public static InterfaceLogBO pollInterfaceLogBO(long timeout, TimeUnit unit) throws InterruptedException {
        return interfaceLogQueue.poll(timeout, unit);
    }

    private static class RunLogWebserviceThread implements Runnable {
        @Override
        public void run() {
            List<InterfaceLogBO> interfaceLogLists = new ArrayList<>();
            while (true) {
                InterfaceLogBO interfaceLogBo = pollInterfaceLogBO(20L, TimeUnit.SECONDS);
                Runnable insertTask = new LogWebserviceThread(interfaceLogLists);
                SCH_THREAD_POOL_EXECUTOR_NEW.execute(insertTask);
            }
        }
    }
}
```

```java
import java.util.concurrent.ThreadFactory;
import java.util.concurrent.atomic.AtomicInteger;

public class UserThreadFactory implements ThreadFactory {
    private final String namePrefix;
    private final AtomicInteger nextId = new AtomicInteger(1);

    public UserThreadFactory(String whatFeatureOfGroup) {
        namePrefix = "From UserThreadFactory's " + whatFeatureOfGroup + "-hebei customization-";
    }

    @Override
    public Thread newThread(Runnable task) {
        String name = namePrefix + nextId.getAndIncrement();
        return new Thread(null, task, name, 0);
    }
}
```

